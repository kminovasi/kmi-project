import{C as b,a as U,L as k,b as x,B as C,p as S,d as Y}from"./chartjs-plugin-datalabels.esm-766c20d8.js";import{a as v}from"./chartjs-plugin-autocolors.esm-a8de2b21.js";import{g as w}from"./_commonjsHelpers-725317a4.js";const P=(t,e)=>{if(!t)t=e.replaceZeroDecimals?"-":"00";else{const n=e.floatingPoint-t.length;if(n>0)for(let a=0;a<e.floatingPoint-t.length;a++)t+="0";else n<0&&(t=t.slice(0,n))}return t},E=(t,e)=>{const n=t.split("."),a=n[0].length;let l=n[0].split("");for(let r=a-1;r>=0;r--)(a-r)%3===0&&r>0&&(l[r]=e.dot+l[r]);const o=l.join("");if(e.removeZeroDecimals&&!n[1])return o;{const r=P(n[1]||null,e);return e.floatingPoint>0?o+e.decimal+r:o}},y=(t,e)=>(e.symbol==="Rp"?t=e.formal?"Rp"+t:"Rp "+t:e.symbol==="IDR"&&(t=e.formal?t+" IDR":"IDR "+t),t),R=(t,e)=>{const n=e.longUnit?["ribu","juta","milyar","triliun"]:[e.k?"k":"rb","jt","M","T"],a=Math.ceil(t.length/3)-2;let l=null;if(a>=0&&a<4){let o=n[a];e.spaceBeforeUnit&&(o=" "+o);const r=t.length%3,i=r===0?3:r;l=t.substr(0,i),l+=(a>=0&&e.floatingPoint>0?e.decimal:"")+t.substr(i,e.floatingPoint)+o}else l=E(t,e);return l},$={symbol:"Rp",formal:!0,dot:".",decimal:",",floatingPoint:2,replaceZeroDecimals:!1,removeZeroDecimals:!1,k:!1,useUnit:!1,longUnit:!1,spaceBeforeUnit:!1};var A=function(e,n={}){return e=typeof e!="string"?e.toString():e,n=Object.assign({},$,n),n.useUnit?y(R(e,n),n):y(E(e,n),n)};const d=w(A);b.register(U,k,x,C,S,Y,v);const M=JSON.parse(document.getElementById("chartDataAkumulasiBenefit").dataset.labels),L=JSON.parse(document.getElementById("chartDataAkumulasiBenefit").dataset.data),N=JSON.parse(document.getElementById("chartDataAkumulasiBenefit").dataset.logos),B={id:"customImagePlugin",afterDraw:(t,e,n)=>{const{ctx:a,chartArea:l,scales:o}=t;t.data.labels.forEach((r,i)=>{const s=o.y;o.x;const c=s.getPixelForValue(i),I=l.left-40;if(m[i]){const f=m[i],D=f.width/f.height,g=20,h=g/D;a.drawImage(f,I,c-h/2,g,h)}})}},m=[];let u;const p=async(t=M,e=L,n=N)=>{try{await Promise.all(n.map((o,r)=>new Promise((i,s)=>{const c=new Image;c.onload=()=>{m[r]=c,i()},c.onerror=s,c.src=o}))),u&&u.destroy();const a=document.getElementById("benefitChart");a.style.height=`${Math.max(360,t.length*40)}px`;const l=a.getContext("2d");u=new b(l,{type:"bar",data:{labels:t,datasets:[{label:"Benefit",data:e}]},options:{responsive:!0,maintainAspectRatio:!1,indexAxis:"y",layout:{padding:{left:50}},scales:{y:{ticks:{display:!1}},x:{beginAtZero:!0,ticks:{callback:function(o){return d(o,{useUnit:!0,longUnit:!0,spaceBeforeUnit:!0,formal:!1})}}}},plugins:{legend:{display:!1},autocolors:{mode:"data"},tooltip:{callbacks:{title:o=>t[o[0].dataIndex],label:o=>`Nilai: ${d(e[o.dataIndex],{useUnit:!0,longUnit:!0,spaceBeforeUnit:!0,formal:!1})}`}},datalabels:{formatter:o=>d(o,{useUnit:!0,longUnit:!0,spaceBeforeUnit:!0,formal:!1}),color:"black",anchor:"center",align:"right",font:{weight:"regular",size:15}},customImagePlugin:B}},plugins:[B]})}catch(a){console.error("Error initializing chart:",a)}};p();document.addEventListener("DOMContentLoaded",()=>{let t=null,e=null;document.querySelectorAll(".start-year-option").forEach(a=>{a.addEventListener("click",function(l){l.preventDefault(),t=this.dataset.startyear,document.getElementById("startYearDropdown").textContent=`Start Year: ${t}`})}),document.querySelectorAll(".end-year-option").forEach(a=>{a.addEventListener("click",function(l){l.preventDefault(),e=this.dataset.endyear,document.getElementById("endYearDropdown").textContent=`End Year: ${e}`})}),document.getElementById("applyYearFilter").addEventListener("click",function(){if(!t||!e){new bootstrap.Modal(document.getElementById("noYearValue")).show();return}if(t>e){new bootstrap.Modal(document.getElementById("invalidYearModal")).show(),t=null,e=null,document.getElementById("startYearDropdown").textContent="Start Year",document.getElementById("endYearDropdown").textContent="End Year";return}fetch(`/dashboard/benefit-chart-data?startYear=${t}&endYear=${e}`).then(a=>a.json()).then(a=>{p(a.labels,a.data,a.logos)}).catch(a=>console.error("Error fetching chart data:",a))}),p();const n=document.getElementById("financialBenefitsData");if(n){const a=JSON.parse(n.dataset.benefits),l=JSON.parse(n.dataset.potentialBenefits),o=document.getElementById("financialBenefits");a.forEach(i=>{const s=document.createElement("div");s.className="financial-benefit-item",s.innerHTML=`
                <span class="financial-benefit-year">${i.year}</span>
                <span class="financial-benefit-total">
                ${d(i.total,{useUnit:!0,longUnit:!0,spaceBeforeUnit:!0,formal:!1})}

                </span>
            `,o.appendChild(s)});const r=document.getElementById("potentialBenefits");l.forEach(i=>{const s=document.createElement("div");s.className="financial-benefit-item",s.innerHTML=`
                <span class="financial-benefit-year">${i.year}</span>
                <span class="financial-benefit-total">
                ${d(i.total,{useUnit:!0,longUnit:!0,spaceBeforeUnit:!0,formal:!1})}

                </span>
            `,r.appendChild(s)})}});
