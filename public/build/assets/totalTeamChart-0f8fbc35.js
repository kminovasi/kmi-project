import{C as p,a as y,L as f,b,B as w,p as T,d as C}from"./chartjs-plugin-datalabels.esm-766c20d8.js";p.register(y,f,b,w,T,C);const u=[],x=async(e=[])=>{try{await Promise.all(e.map((r,n)=>new Promise((c,l)=>{const o=new Image;o.src=r,o.onload=()=>{u[n]=o,c()},o.onerror=l})))}catch(r){console.error("[TotalTeamChart] Error loading logos:",r)}},P={id:"customImagePlugin",afterDraw:e=>{var l,o;const{ctx:r,chartArea:n,scales:c}=e;(o=(l=e==null?void 0:e.data)==null?void 0:l.labels)!=null&&o.length&&e.data.labels.forEach((m,d)=>{const g=c.x.getPixelForTick(d),a=n.bottom,t=u[d];if(!t)return;const i=t.width/t.height||1,s=30,h=s/i;r.drawImage(t,g-s/2,a,s,h)})}};document.addEventListener("DOMContentLoaded",async()=>{const e=document.getElementById("total-team-chart");if(!e){console.error("[TotalTeamChart] Canvas #total-team-chart tidak ditemukan");return}const r=e.getContext("2d"),n=window.chartDataTotalTeam||{},c=n.labels||[],l=Array.isArray(n.datasets)?n.datasets:[],o=n.company_ids||[],m=n.logos||[],d=l.map((a,t)=>{var i;return{i:t,len:((i=a==null?void 0:a.data)==null?void 0:i.length)??-1}}).filter(a=>a.len!==c.length);d.length&&console.warn("[TotalTeamChart] Panjang data tidak sejajar dengan labels:",d);const g=l.map(a=>({...a,data:(a.data||[]).map(t=>typeof t=="number"?t:Number(t||0))}));await x(m),new p(r,{type:"bar",data:{labels:c,datasets:g},options:{responsive:!0,layout:{padding:{bottom:50}},plugins:{legend:{position:"top"},title:{display:!0,text:"Total Tim Per Perusahaan"},datalabels:{display:!0,align:"end",anchor:"end",formatter:a=>(typeof a=="number"?a:Number(a||0)).toLocaleString("id-ID"),font:{weight:"bold",size:12}}},scales:{x:{title:{display:!1},ticks:{display:!1}},y:{title:{display:!0,text:"Jumlah Tim"}}},onClick:(a,t)=>{if(!(t!=null&&t.length))return;const i=t[0].index,s=o==null?void 0:o[i];console.log("[TotalTeamChart] onClick companyId:",s,"index:",i),s!=null&&s!==""&&(window.location.href=`/detail-company-chart/${s}`)},onHover:function(a,t){a.native.target.style.cursor=t.length?"pointer":"default"}},plugins:[P]})});
